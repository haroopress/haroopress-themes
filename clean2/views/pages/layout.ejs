<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title><%= config.meta.pageTitle %> <%= config.meta.defaultTitle %></title>
    <meta name="description" content="<%= config.meta.description %>">
    <meta name="author" content="<%= config.meta.author %>">
    <meta name="keywords" content="<%= config.meta.keywords.join(',') %>" />
    <meta name="generator" content="haroopress v<%= config.meta.version %>" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link href="/rss.xml" rel="alternate" title="<%= config.meta.defaultTitle %>" type="application/rss+xml">
    <link href='http://fonts.googleapis.com/css?family=Magra:700' rel='stylesheet' type='text/css'>

    <!-- Le styles -->
    <link rel="canonical" href="<%= config.meta.siteUrl %>">

    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/bootstrap-responsive.css" rel="stylesheet">
    <link href="/css/font-awesome.css" rel="stylesheet">
    <link href="/css/markdown.css" rel="stylesheet">
    <link href="/css/haroopress.css" rel="stylesheet">
    <link href="/css/theme.css" rel="stylesheet">
    <link href="/css/code/<%=config.defaultCodeStyle%>.css" rel="stylesheet">

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">

    <!-- Le javascript -->
    <script src="/js/jquery.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/apps/toc.js"></script>
</head>
<body data-spy="scroll" data-target=".subnav" data-offset="50">

    <%- partial('layout/header', { config: config, pages: pages }) %>

    <%- body %>

    <%- partial('layout/footer', config) %>

    <script>
        // fix sub nav on scroll
        var $win = $(window)
          , $nav = $('.subnav')
          , navTop = $('.subnav').length && $('.subnav').offset().top - 40
          , isFixed = 0

        processScroll()

        $win.on('scroll', processScroll)

        function processScroll() {
          var i, scrollTop = $win.scrollTop()
          if (scrollTop >= navTop && !isFixed) {
            isFixed = 1
            $nav.addClass('subnav-fixed')
          } else if (scrollTop <= navTop && isFixed) {
            isFixed = 0
            $nav.removeClass('subnav-fixed')
          }
        }
    </script>
    
    <%- partial('plugins/google-analysis', config.analytics) %>

</body>
</html>
